<!DOCTYPE html>
<html>
<head>
<title></title>
<script type="text/javascript">
var can,ctx,can1,ctx1;
var cw,ch;
var random=true;
var seed;
var r1,g1,b1,r2,g2,b2;
var size=22;//number of recursions
var ldc=1.1;//length decrease factor
var len1=20;
var maxchildren=2;
function gradient(x){
return "rgb("+Math.ceil(r2+x*(r1-r2))+","+Math.ceil(g2+x*(g1-g2))+","+Math.ceil(b2+x*(b1-b2))+")";
}
function Branch(x,y,len,ang,lifespan){
	this.x=x;
	this.y=y;
	this.ang=ang;
	this.len=len;
	this.lifespan=lifespan;

	this.children=[];
	this.draw=function(){
		
		ctx.strokeStyle=gradient(Math.sqrt(this.lifespan/size));
		ctx.lineWidth=Math.ceil(4*this.lifespan/size);
		ctx.beginPath();
		ctx.moveTo(this.x,this.y);
		ctx.lineTo(this.x+this.len*Math.cos(this.ang),this.y+this.len*Math.sin(this.ang));
		ctx.stroke();
		for(var i=0;i<this.children.length;i++){
			this.children[i].draw();
		}
	}
	this.populate=function(){
	this.children=[];
		if(random){
			if(this.lifespan>0){
				var n=Math.ceil(Math.random()*maxchildren);
				for(var i=0;i<n;i++){
					this.children.push(new Branch(this.x+this.len*Math.cos(this.ang),this.y+this.len*Math.sin(this.ang),
					this.len/(ldc),n===1?(this.ang+Math.PI/8-Math.random()*Math.PI/4):(this.ang+Math.PI/4-Math.random()*Math.PI/2),lifespan-1));
					this.children[i].populate();
				}
			}
		}else{
			if(this.lifespan>0){
				var n=maxchildren;
				for(var i=0;i<n;i++){
					this.children.push(new Branch(this.x+this.len*Math.cos(this.ang),this.y+this.len*Math.sin(this.ang),
					this.len/(ldc),this.ang-Math.PI/4+(i)*Math.PI/(2*(n-1)),lifespan-1));
					this.children[i].populate();
				}
			}
		}
	}
}
function init(){
	can=document.getElementById("can");
	ctx=can.getContext("2d");
	cw=can.width;
	ch=can.height;
	y0=ch/2;
	slider1=document.getElementById("slider1");
	slider2=document.getElementById("slider2");
	tree();
}	
function clearCanvas(){
	ctx.clearRect(0,0,cw,ch)}
function tree(){
	updateColors();
	size=parseInt(document.getElementById("input1").value);
	maxchildren=parseFloat(document.getElementById("input2").value);
	len1=parseFloat(document.getElementById("input3").value);
	ldc=parseFloat(document.getElementById("input4").value);
	clearCanvas();
	seed=new Branch(300,400,len1,-Math.PI/2,size);
	seed.populate();
	seed.draw();
	
	/*seed2=new Branch(600,300,30,-Math.PI/2,size);
	seed2.populate();
	seed2.draw();*/
}
function redraw(){
	clearCanvas();
	seed.draw();
}
function updateColors(){
	r1=parseInt(document.getElementById("r1").value);
	g1=parseInt(document.getElementById("g1").value);
	b1=parseInt(document.getElementById("b1").value);
	r2=parseInt(document.getElementById("r2").value);
	g2=parseInt(document.getElementById("g2").value);
	b2=parseInt(document.getElementById("b2").value);
	document.getElementsByClassName("colorbox")[0].style.backgroundColor="rgb("+r1+","+g1+","+b1+")";
	document.getElementsByClassName("colorbox")[1].style.backgroundColor="rgb("+r2+","+g2+","+b2+")";
}

</script>
<style>
body{
color:white;
font-family:arial, sans-serif;
}
.colorbox{
width:12px;
height:12px;
display:inline-block;
}
</style>
	<title></title>
</head>
<body onload="init()" id="body" bgcolor="#000">
<button onclick="redraw()">Redraw</button>
<button onclick="tree()">New Tree</button>
<canvas height="500" width="800" id="can"></canvas><br>
Size (recursions)<input type="text" size="10" id="input1" value="22"><br>
Max Children<input type="text" size="10" id="input2" value="2"><br>
Initial Length<input type="text" size="10" id="input3" value="20"><br>
Child Length Decrease<input type="text" size="10" id="input4" value="1.1"><br>
<table>
<tr>
<td>Color 1 RGB</td>
<td><input type="text" size="3" id="r1" value="102" onchange="updateColors()"></td>
<td><input type="text" size="3" id="g1" value="51" onchange="updateColors()"></td>
<td><input type="text" size="3" id="b1" value="0" onchange="updateColors()"></td>
<td><span class="colorbox"></span></td>
</tr>
<tr>
<td>Color 2 RGB</td>
<td><input type="text" size="3" id="r2" value="30" onchange="updateColors()"></td>
<td><input type="text" size="3" id="g2" value="140" onchange="updateColors()"></td>
<td><input type="text" size="3" id="b2" value="10" onchange="updateColors()"></td>
<td><span class="colorbox"></span></td>
</tr>
</table>

</body></html>
